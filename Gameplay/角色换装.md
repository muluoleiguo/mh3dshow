

由于整个3D玩法的基调就是类似叠纸的奇迹暖暖的换装游戏，因此这一块是最重要的Gameplay之一。

首先请看视频

TODO: 视频演示。



首先从整个角色的构成来说

角色由

* 身体的主要骨骼
* 脸部骨骼
* 挂接物的骨骼
* 软骨

现在的身体主要骨骼一共有4种体型（男，女，巨人，虎头怪），19角色对应的脸部。挂接物都是可以通用的。



从换装的逻辑上来说分为三个大的模块

1、装备(Equip)

2、资产模型(Prefab) 或者可以叫做SkeletalMesh以及其Skeleton甚至是StaticMesh

3、挂接处理(Attachment)



### 1、装备(Equip)

**策划要求小件装备替换大件装备**

装备id001有一个腰带(waistpendant001)和衣服(cloth001)，那么穿上一个id002的腰带(waistpendant002)时候，就会顶掉`id001`中的腰带(waistpendant001)但是保留了`(cloth001)`，脱下`id002`的时候`waistpendant00001`又出现了，因此数据结构设计上就是**优先队列**，一个Equip(装备)中有的Prefab(资产模型)都同时存在，只不过优先级最高的显示而已。如此以来就非常容易理解了。

不过还需要理解一个东西，那就是人的身体是很神奇的，可以挂得满满当当的，所以一定不能把槽位(比如腰带在腰上，但是腰部是很大的空间，可以同时有腰带和比如腰包)固定死，这个应该是一个可以自由扩展的东西



### 2、资产模型(Prefab) 

这一部分主要是由于项目的特殊性，即商业引擎**Unreal**编辑-》自研引擎**Messiah**运行差异导致的，如果在Unreal中加载SkeletalMesh资源不论是同步的还是异步的都是直接了当的，有SkeletalMeshComponent来打辅助很方便。但是对于Messiah而言，重要的是把美术编辑的数据转换为Messiah可以识别的格式并且Runtime用相应的逻辑使用这些数据。

这里结合项目组开发的ShellComponent来讲解

TODO:



### 3、挂接

TODO: 这里主要是结合AnimationBlueprint来讲解， 怎么做挂接物的动画同步，在各种编辑器中如何适配的





